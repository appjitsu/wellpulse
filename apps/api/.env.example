# ============================================================================
# WellPulse API - Environment Configuration
# ============================================================================

# Node Environment
NODE_ENV=development

# Server Configuration
PORT=3001
API_PREFIX=api/v1

# Master Database (stores tenant metadata, admin users, billing)
MASTER_DATABASE_URL=postgresql://wellpulse:wellpulse@localhost:5432/wellpulse_dev

# PostgreSQL Configuration (for tenant database provisioning)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=wellpulse
POSTGRES_PASSWORD=wellpulse

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-super-secret-refresh-token-key-change-this-in-production
JWT_REFRESH_EXPIRES_IN=30d

# CORS Configuration
CORS_ORIGIN=http://localhost:4000,http://localhost:4002
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Logging
LOG_LEVEL=debug

# Azure Application Insights (Production Monitoring)
# Get connection string from Azure Portal > Application Insights > Properties
# Leave empty for local development (will use console logging only)
APPLICATIONINSIGHTS_CONNECTION_STRING=
ENABLE_DETAILED_LOGGING=false

# Redis (for caching and rate limiting)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Email Configuration (Mailpit for development)
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@wellpulse.app

# Dashboard URL (for email links - use subdomain format for multi-tenancy)
DASHBOARD_URL=http://demo.localhost:4001/dashboard

# Azure Blob Storage (Production file storage)
AZURE_STORAGE_ACCOUNT_NAME=
AZURE_STORAGE_ACCOUNT_KEY=
AZURE_STORAGE_CONTAINER_NAME=wellpulse-uploads

# Stripe (Billing)
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# ML Service
ML_SERVICE_URL=http://localhost:8000

# Encryption (for database connection strings in master DB)
ENCRYPTION_KEY=your-32-character-encryption-key-here-change-this

# Slack Notifications (for tenant creation, secret rotation, alerts)
# Create Incoming Webhook: https://api.slack.com/messaging/webhooks
# Leave empty to disable Slack notifications (will log to console instead)
SLACK_WEBHOOK_URL=

# Azure Entra ID (Azure AD) Authentication (Optional - for SSO)
# Register app in Azure Portal: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade
# Leave empty to disable Azure AD authentication (local auth only)
AZURE_AD_CLIENT_ID=
AZURE_AD_TENANT_ID=
AZURE_AD_CLIENT_SECRET=
AZURE_AD_REDIRECT_URI=https://wellpulse.io/auth/callback

# Azure AD Role Mapping (Optional - maps Azure AD groups to WellPulse roles)
# Comma-separated list of Azure AD group Object IDs
# Find group IDs: Azure Portal > Azure Active Directory > Groups
AZURE_AD_ADMIN_GROUPS=
AZURE_AD_MANAGER_GROUPS=

# Azure AD App Roles Mapping (Alternative to groups)
# Define app roles in Azure Portal > App Registration > App roles
AZURE_AD_ADMIN_ROLES=
AZURE_AD_MANAGER_ROLES=
